box: debian
build:
  steps:
    - install-packages:
        packages: git ssh-client glibc liberror-perl 
    - script:
        name: initialize and update git submodules
        code: |
            git submodule init
            git submodule update --remote --recursive
    - arjen/hugo-build:
        version: "0.62.2"
        theme: academic
        flags: --buildDrafts=true
        force_install: true
    - script:
        name: ls stuff
        code: |
          ls -haltr /pipeline/source/public
    
deploy:
  steps:
    - script:
        name: ls output
        code: |
          ls -haltr /pipeline/output
    - script:
        name: ls source
        code: |
          ls -haltr /pipeline/source
    - pahnev/gh-pages@0.3.1:
        token: $GIT_TOKEN
        domain: amartya18x.github.io
        basedir: public